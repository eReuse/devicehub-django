{% extends "base.html" %}
{% load i18n %}
{% load paginacion %}

{% block actions %}

    {% if lot %}
    <a href="{#% url 'lot:documents' object.id %#}" type="button" class="btn btn-green-admin btn-todo" data-bs-toggle="tooltip" title="{% trans " NOT IMPLEMENTED. Menu for adding documents for the lot" %} ">
      <i class="bi bi-folder2"></i>
      {% trans 'Documents' %}
    </a>
    {% endif %}
        {% if lot %}
    <a href="{% url 'lot:properties' object.id %}" type="button" class="btn btn-green-admin" >
      <i class="bi bi-tag"></i>
      {% trans 'Properties' %}
    </a>
    {% endif %}
      <a href="{# url 'dashboard:exports' object.id #}" type="button" class="btn btn-todo" data-bs-toggle="tooltip" title=" {% trans "NOT IMPLEMENTED. This action tries to emulate what devicehub-teal did, which was related to opening a dialog where you can select different options for export the devices as csv for all selected devices" %}" >
      <i class="bi bi-reply"></i>
      {% trans 'Exports' %}
    </a>


{% endblock%}

{% block content %}

{% if lot.name %}
<h3 class="text-muted"> <i class="bi bi-folder2-open me-2"></i>{% trans "Lot" %} {{ lot.name }}</h3>
{% endif %}

<div class="dataTable-container mt-4">
  <form method="post">
    {% csrf_token %}

    <div class="d-flex justify-content-end m-2 mb-4">
      <button id="remove-button" class="btn btn btn-danger me-2" type="submit" value="{% url 'lot:del_devices' %}" name="url" disabled>
        <i class="bi bi-folder-minus pe-2"></i>
        {% trans 'Unassign' %}
      </button>
      <button class="btn btn-green-user" type="submit" name="url" value="{% url 'lot:add_devices' %}">
        <i class="bi bi-folder-symlink"></i>
        {% trans 'Assign to lot' %}
      </button>
    </div>

    <table class="table table-hover table-bordered">
      <thead class="table-light">
        <tr>
          <th scope="col" class="text-center">
            <input type="checkbox" id="select-all" />
          </th>
          <th scope="col" class="text-center">
            {% trans "Short ID" %}
          </th>
          <th scope="col" class="text-center">
            {% trans "Type" %}
          </th>
          <th scope="col" class="text-center">
            {% trans "Manufacturer" %}
          </th>
          <th scope="col" class="text-center">
            {% trans "Model" %}
          </th>
          <th scope="col" class="text-center">
            {% trans "Current State" %}
          </th>
          <th scope="col" data-type="date" class="text-center" data-format="YYYY-MM-DD HH:mm">
            {% trans "Evidence last updated" %}
          </th>
        </tr>
      </thead>
      <tbody>
        {% for dev in devices %}
        <tr>
          <td class="text-center">
            <input type="checkbox" name="devices" value="{{ dev.id }}" />
          </td>
          <td class="text-center">
            <a href="{% url 'device:details' dev.id %}">
              {{ dev.shortid }}
            </a>
          </td>
          <td class="text-center">
            {% if dev.type == "Laptop" or dev.type == "Netbook" %}
              <i class="bi bi-laptop"></i>
            {% elif dev.type == "Desktop" or dev.type == "Server" %}
              <i class="bi bi-pc-display"></i>
            {% elif dev.type == "Motherboard" %}
              <i class="bi bi-motherboard"></i>
            {% elif dev.type == "GraphicCard" %}
              <i class="bi bi-gpu-card"></i>
            {% elif dev.type == "HardDrive" %}
              <i class="bi bi-hdd"></i>
            {% elif dev.type == "SolidStateDrive" %}
              <i class="bi bi-device-ssd"></i>
            {% elif dev.type == "NetworkAdapter" %}
              <i class="bi bi-pci-card-network"></i>
            {% elif dev.type == "Processor" %}
              <i class="bi bi-cpu"></i>
            {% elif dev.type == "RamModule" %}
              <i class="bi bi-memory"></i>
            {% elif dev.type == "SoundCard" %}
              <i class="bi bi-speaker"></i>
            {% elif dev.type == "Display" %}
              <i class="bi bi-display"></i>
            {% elif dev.type == "Battery" %}
              <i class="bi bi-battery"></i>
            {% elif dev.type == "Camera" %}
              <i class="bi bi-camera"></i>
            {% endif %}
             {{dev.type}}
          </td>
          <td class="text-center">
            {{ dev.manufacturer }}
          </td>
          <td class="text-center">
	          {% if dev.version %}
              {{dev.version}} {{ dev.model }}
	          {% else %}
              {{ dev.model }}
	          {% endif %}
          </td>
          <td class="text-center">
            {{ dev.get_current_state.state|default:"N/A" }}
          </td>
          <td class="text-center">
            {{ dev.last_evidence.created }}
          </td>
        </tr>
      </tbody>
    {% endfor %}
  </table>
  </form>
</div>

<div class="mt-5 d-flex align-items-center justify-content-center">
    {% render_pagination page total_pages limit %}
</div>

<script>
  // Placeholder check-all js
  document.getElementById('select-all').onclick = function() {
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
    for (var checkbox of checkboxes) {
      checkbox.checked = this.checked;
    }
  }

</script>
{% endblock %}

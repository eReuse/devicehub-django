
{% load i18n %}

<!-- Device Details -->
    <div class="tab-pane fade show active" id="details">
          <h5 class="card-title">{% trans 'Details' %}</h5>
          <hr>
          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Phid' %}
            </div>
            <div class="col-sm-8">{{ object.hid }}
            </div>
          </div>

          {% if object.is_eraseserver %}
          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Is an erase server' %}
            </div>
            <div class="col-sm-8">{% trans 'Yes' %}
            </div>
          </div>
          {% endif %}

          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Type' %}
            </div>
            <div class="col-sm-8">{{ object.type }}
            </div>
          </div>

          {% if object.is_websnapshot and object.last_user_evidence %}
            {% for k, v in object.last_user_evidence.items %}
            <div class="row mb-3">
              <div class="col-sm-4 text-muted fw-bold">{{ k }}
              </div>
              <div class="col-sm-8">{{ v|default:'' }}
              </div>
            </div>
            {% endfor %}
          {% else %}
          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Manufacturer' %}
            </div>
            <div class="col-sm-8">{{ object.manufacturer|default:'' }}
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Model' %}
            </div>
            <div class="col-sm-8">{{ object.model|default:'' }}
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">
              {% trans 'Version' %}
            </div>
            <div class="col-sm-8">{{ object.version|default:'' }}</div>
          </div>

          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Serial Number' %}
            </div>
            <div class="col-sm-8">{{ object.serial_number|default:'' }}
            </div>
          </div>
          {% endif %}

          <div class="row mb-3">
            <div class="col-sm-4 text-muted fw-bold">{% trans 'Alias Identifiers' %}
            </div>
            <div class="col-sm-8">
              {% for chid in object.hids %}
                <div>{{ chid|default:'' }}
                </div>
              {% endfor %}
            </div>
          </div>

        {% if object.QR %}
        <style>
            /* QR print mode */
            @media print {
                body.printing-qr > *:not(#qr-print-overlay) {
                    display: none !important;
                }
                #qr-print-overlay {
                    display: flex !important;
                    flex-direction: column;
                    align-items: flex-start;
                }
                #qr-print-overlay img {
                    width: 200px;
                }
                #qr-print-overlay p {
                    width: 200px;
                    text-align: center;
                    font-size: 25px;
                    font-family: monospace;
                    margin-top: 8px;
                    font-weight: bold ;
                }
            }
        </style>
        <script>
            const printQr = () => {
                const img = document.getElementById(`qrImg`)
                var o = document.createElement('div');
                o.id = 'qr-print-overlay';
                o.innerHTML = '<img src="' + img.src + '"><p> {{ object.shortid }}</p>';
                document.body.appendChild(o);
                document.body.classList.add('printing-qr');
                window.addEventListener('afterprint',
                    function h() {
                        document.body.classList.remove('printing-qr');
                        o.remove();
                        window.removeEventListener('afterprint', h);
                    });
                window.print();
            }
        </script>
        <div class="row mb-3">
            <div class="col-sm-4 qr-printable">
              <img id="qrImg" width="100px" src="data:image/png;base64,{{ object.QR }}" />
              <span id="qrShortId" hidden>{{ object.shortid }}</span>
            </div>
            <div class="col-sm-8">
              <button type="button" class="btn btn-outline-secondary btn-sm"
                onclick="printQr()">
                <i class="bi bi-printer"></i> {% trans "Print Label" %}
              </button>
            </div>
          </div>
	  {% endif %}
      </div>

